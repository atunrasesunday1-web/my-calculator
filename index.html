<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Vision Pro AI</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#000000">
    
    <link rel="manifest" href="data:application/manifest+json,{%22name%22:%22Vision%20Pro%22,%22short_name%22:%22Vision%22,%22display%22:%22standalone%22,%22background_color%22:%22#000000%22,%22theme_color%22:%22#000000%22}">

    <style>
        :root { --accent: #00d4ff; --bg: #000; --panel: rgba(255, 255, 255, 0.05); }
        
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        
        body { 
            background: var(--bg); color: white; height: 100vh; 
            margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            display: flex; justify-content: center; overflow: hidden;
        }

        /* FULLSCREEN APP FRAME */
        .app-frame {
            width: 100%; max-width: 420px; height: 100%;
            display: flex; flex-direction: column; padding: 40px 25px 30px 25px;
            position: relative;
        }

        /* PREMIUM FLOATING ELEMENTS */
        .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        
        #mic-icon { 
            width: 50px; height: 50px; border-radius: 18px; 
            background: var(--panel); display: flex; align-items: center; justify-content: center;
            border: 1px solid rgba(255,255,255,0.1); cursor: pointer;
        }
        .mic-active { border-color: #ff4d4d !important; box-shadow: 0 0 20px rgba(255, 77, 77, 0.4); animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* HUD DISPLAY */
        .display { flex: 1; display: flex; flex-direction: column; justify-content: flex-end; text-align: right; padding: 20px 0; }
        #history { color: var(--accent); font-size: 13px; font-weight: bold; letter-spacing: 2px; opacity: 0.7; margin-bottom: 8px; min-height: 20px; }
        #screen { font-size: 72px; font-weight: 200; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

        /* TITAN GRID */
        .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 14px; }
        button { 
            height: 72px; border-radius: 24px; border: none; 
            background: var(--panel); color: white; 
            font-size: 26px; cursor: pointer; transition: 0.1s;
            display: flex; align-items: center; justify-content: center;
        }
        button:active { background: var(--accent); color: black; transform: scale(0.9); }
        
        .op { color: var(--accent); background: rgba(0, 212, 255, 0.08); font-weight: bold; }
        .sci { font-size: 16px; color: #b366ff; display: none; } /* Show in landscape */
        
        #btn-action { grid-column: span 4; height: 60px; background: var(--accent); color: black; font-weight: 800; font-size: 14px; letter-spacing: 2px; margin-top: 10px; border-radius: 20px; text-transform: uppercase; }

        /* LANDSCAPE LOGIC */
        @media (orientation: landscape) {
            .app-frame { max-width: 800px; padding: 20px; }
            .grid { grid-template-columns: repeat(6, 1fr); gap: 8px; }
            .sci { display: flex; }
            button { height: 50px; }
            #screen { font-size: 45px; }
        }
    </style>
</head>
<body>

    <div class="app-frame">
        <div class="top-bar">
            <div id="mic-icon" onclick="startVoice()">üéôÔ∏è</div>
            <div style="font-size: 10px; letter-spacing: 3px; opacity: 0.3;">VISION TITAN V1.0</div>
        </div>
        
        <div class="display" id="swipe-zone">
            <div id="history">CORE INITIALIZED</div>
            <div id="screen">0</div>
        </div>

        <div class="grid">
            <button class="op sci" onclick="mathOp('sqrt')">‚àöx</button>
            <button class="op sci" onclick="mathOp('pow')">x¬≤</button>
            <button class="op sci" onclick="mathOp('log')">log</button>

            <button class="op" style="color: #ff4d4d;" onclick="clr()">AC</button>
            <button class="op" onclick="press('/')">√∑</button>
            <button class="op" onclick="press('*')">√ó</button>
            <button class="op" onclick="backspace()">‚å´</button>

            <button onclick="press('7')">7</button>
            <button onclick="press('8')">8</button>
            <button onclick="press('9')">9</button>
            <button class="op" onclick="press('-')">‚àí</button>

            <button onclick="press('4')">4</button>
            <button onclick="press('5')">5</button>
            <button onclick="press('6')">6</button>
            <button class="op" onclick="press('+')">+</button>

            <button onclick="press('1')">1</button>
            <button onclick="press('2')">2</button>
            <button onclick="press('3')">3</button>
            <button class="op" style="background: var(--accent); color: black;" onclick="solve()">=</button>

            <button style="grid-column: span 2" onclick="press('0')">0</button>
            <button onclick="press('.')">.</button>
            <button class="op" onclick="fxMode()">‚Ç¶</button>
            
            <button id="btn-action" onclick="runAI()">Vision Analysis</button>
        </div>
    </div>

    <script>
        let input = "";
        let liveRate = 1600;

        // --- THE APP ENGINE ---
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('data:application/javascript,' + encodeURIComponent('self.addEventListener("fetch", (e)=>{});'));
        }

        // --- SWIPE TO CLEAR ---
        let touchStart = 0;
        document.getElementById('swipe-zone').addEventListener('touchstart', e => touchStart = e.touches[0].clientX);
        document.getElementById('swipe-zone').addEventListener('touchend', e => {
            if (Math.abs(e.changedTouches[0].clientX - touchStart) > 60) { backspace(); vib(20); }
        });

        function press(v) { input += v; update(); vib(15); }
        function clr() { input = ""; update(); document.getElementById('history').innerText = "CLEARED"; vib(50); }
        function backspace() { input = input.slice(0, -1); update(); vib(10); }
        function update() { document.getElementById('screen').innerText = input || "0"; }
        function solve() { try { input = eval(input).toString(); update(); vib(60); } catch(e){ document.getElementById('screen').innerText = "ERROR"; } }
        function vib(ms) { if (navigator.vibrate) navigator.vibrate(ms); }

        function fxMode() {
            if(!input) return;
            document.getElementById('history').innerText = "CONVERTING USD...";
            input = (parseFloat(input) * liveRate).toLocaleString();
            update(); vib(80);
        }

        function mathOp(type) {
            let v = parseFloat(input);
            if(type==='sqrt') input = Math.sqrt(v);
            if(type==='pow') input = v*v;
            if(type==='log') input = Math.log10(v);
            input = input.toString(); update(); vib(40);
        }

        // --- VOICE ASSISTANT ---
        function startVoice() {
            const Rec = window.SpeechRecognition || window.webkitSpeechRecognition;
            if(!Rec) return;
            const r = new Rec();
            document.getElementById('mic-icon').classList.add('mic-active');
            r.start();
            r.onresult = (e) => {
                let t = e.results[0][0].transcript.toLowerCase();
                t = t.replace(/plus/g,'+').replace(/minus/g,'-').replace(/times/g,'*').replace(/divided/g,'/');
                try { input = eval(t.replace(/[^-()\d/*+.]/g, '')).toString(); update(); } catch(err){}
            };
            r.onend = () => document.getElementById('mic-icon').classList.remove('mic-active');
        }

        function runAI() {
            const msg = new SpeechSynthesisUtterance("Analysis of " + (input || 0) + " complete.");
            window.speechSynthesis.speak(msg);
            vib(150);
        }

        // Fetch rates silently
        fetch('https://open.er-api.com/v6/latest/USD').then(r=>r.json()).then(d=>liveRate=d.rates.NGN).catch(e=>null);
    </script>
</body>
</html>
